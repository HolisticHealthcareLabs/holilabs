# Enterprise deployment configuration
appId: com.holilabs.sidecar
productName: HoliLabs Clinical Assurance
copyright: Copyright Â© 2026 HoliLabs
directories:
  output: dist/installers

# Mac Configuration
mac:
  target:
    - target: dmg
      arch: [arm64, x64]  # Support both Apple Silicon and Intel
    - target: zip
      arch: [arm64, x64]
  hardenedRuntime: true  # Required for notarization
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  notarize:
    teamId: ${APPLE_TEAM_ID}  # Uses notarytool (electron-builder 24.0+)

# Windows Configuration (MSI for Group Policy deployment)
win:
  target:
    - target: msi
      arch: [x64]
    - target: nsis
      arch: [x64]

  # Azure Trusted Signing (cloud HSM for EV certificate)
  sign: "./scripts/azure-sign.js"
  signingHashAlgorithms: ['sha256']

msi:
  # GPO-friendly options
  oneClick: false
  perMachine: true
  createDesktopShortcut: false
  createStartMenuShortcut: true

  # Silent install support
  # msiexec /i HoliLabs.msi /qn ALLUSERS=1
  runAfterFinish: false

nsis:
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true

# Auto-update configuration - GitHub Releases
publish:
  provider: github
  owner: holilabs
  repo: holilabsv2
  private: false
