# Database
DATABASE_URL="postgresql://user:password@localhost:5432/holi_labs?schema=public"

# Supabase (for file storage and authentication)
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key-here"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# AI Services
# Primary AI Providers (for Clinical Decision Support)
GOOGLE_AI_API_KEY="your-gemini-api-key-here"           # Gemini 1.5 Flash (primary - cost-effective)
ANTHROPIC_API_KEY="your-anthropic-api-key-here"        # Claude Sonnet (fallback - highest quality)
OPENAI_API_KEY="your-openai-api-key-here"              # GPT-4 Turbo (secondary fallback)

# Feature Flag: Enable real LLM for Slow Lane auditor
# Set to "true" to use GPT-4o-mini, "false" for mock adapter (demo mode)
USE_REAL_LLM="false"

# Governance Mode: "LIVE" for production, "SHADOW" for silent logging (pilot mode)
GOVERNANCE_MODE="LIVE"

# AI Transcription Services
ASSEMBLYAI_API_KEY="your-assemblyai-api-key-here"
DEEPGRAM_API_KEY="your-deepgram-api-key-here"

# AI Cost Optimization
AI_PRIMARY_PROVIDER="gemini"                            # Options: gemini, claude, openai
AI_FALLBACK_ENABLED="true"                              # Enable automatic fallback between providers
AI_CACHE_ENABLED="true"                                 # Enable Redis caching (24-hour TTL)
AI_CACHE_TTL="86400"                                    # Cache TTL in seconds (default: 24 hours)
AI_RATE_LIMIT_PER_USER="50"                             # Max AI queries per hour per user
MAX_CONCURRENT_AI_REQUESTS="10"                         # Max concurrent AI requests to prevent saturation

# AI Usage Quotas (Freemium Model)
AI_FREE_TIER_LIMIT="10"                                 # FREE: 10 queries/day
AI_STARTER_TIER_LIMIT="50"                              # STARTER: 50 queries/day
AI_PRO_TIER_LIMIT="999999"                              # PRO: Unlimited
AI_ENTERPRISE_TIER_LIMIT="999999"                       # ENTERPRISE: Unlimited

# Cost Monitoring Alerts
AI_MONTHLY_BUDGET_USD="100"                             # Monthly AI cost budget in USD
AI_ALERT_THRESHOLD_PERCENT="80"                         # Send alert at 80% of budget

# ========================================
# SMS & WHATSAPP NOTIFICATION SYSTEM
# ========================================
# Twilio SMS & WhatsApp Business API
# Sign up at https://twilio.com → Console → Account Info
# For WhatsApp: Console → Messaging → Try it out → WhatsApp Sandbox
# Production: Request WhatsApp Business API access

TWILIO_ACCOUNT_SID="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
TWILIO_AUTH_TOKEN="your-twilio-auth-token-here"

# SMS Configuration
# Get a phone number: Console → Phone Numbers → Buy a number
TWILIO_PHONE_NUMBER="+15551234567"

# WhatsApp Configuration
# Development: Use Twilio Sandbox number
# Production: Your approved WhatsApp Business number
TWILIO_WHATSAPP_NUMBER="whatsapp:+14155238886"

# Optional: Enable SMS/WhatsApp delivery tracking
# Twilio automatically tracks delivery status via webhooks
TWILIO_STATUS_CALLBACK_URL="${NEXT_PUBLIC_APP_URL}/api/notifications/delivery/twilio"

# Blockchain (optional)
PRIVATE_KEY="your-wallet-private-key"
RPC_URL="https://polygon-mainnet.infura.io/v3/your-key"

# App Configuration
NEXT_PUBLIC_APP_URL="http://localhost:3000"  # Production: https://holilabs.xyz
NODE_ENV="development"

# ========================================
# EMAIL NOTIFICATION SYSTEM
# ========================================
# Choose your email provider by setting EMAIL_PROVIDER
# Options: 'resend' (recommended), 'sendgrid', 'ses', 'smtp'
EMAIL_PROVIDER="resend"
FROM_EMAIL="noreply@holilabs.com"
FROM_NAME="Holi Labs"

# Option 1: Resend (Recommended - Simple & Reliable)
# Sign up at https://resend.com → API Keys → Create API Key
RESEND_API_KEY="re_your-api-key-here"

# Option 2: SendGrid
# Sign up at https://sendgrid.com → Settings → API Keys
# Requires: pnpm add @sendgrid/mail
SENDGRID_API_KEY="SG.your-sendgrid-api-key"

# Option 3: AWS SES (Simple Email Service)
# Setup: AWS Console → SES → SMTP Settings
# Requires: pnpm add @aws-sdk/client-ses
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"

# Option 4: Custom SMTP Server
# Use any SMTP provider (Gmail, Outlook, custom server)
# Requires: pnpm add nodemailer
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"

# ========================================
# WEB PUSH NOTIFICATIONS
# ========================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
# Public key: Shared with browser (safe to expose)
# Private key: Server-side only (keep secret)
# Subject: Your support email for push notification issues

NEXT_PUBLIC_VAPID_PUBLIC_KEY="Bxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
VAPID_PRIVATE_KEY="your-vapid-private-key-here"
VAPID_EMAIL="mailto:support@holilabs.com"

# Stripe Payments
STRIPE_SECRET_KEY="sk_test_your-secret-key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your-publishable-key"
STRIPE_WEBHOOK_SECRET="whsec_your-webhook-secret"

# CFDI / Mexican Tax Compliance
HOLI_LABS_RFC="HOL123456ABC"
PAC_PROVIDER="finkok" # Options: finkok, sw-sapien, diverza, ecodex
PAC_API_URL="https://facturacion.finkok.com/servicios/soap"
PAC_USERNAME="your-pac-username"
PAC_PASSWORD="your-pac-password"
PAC_CERTIFICATE="" # Base64-encoded CSD certificate (.cer)
PAC_PRIVATE_KEY="" # Base64-encoded CSD private key (.key)
PAC_PRIVATE_KEY_PASSWORD="your-key-password"

# Encryption Key (generate with: openssl rand -base64 32)
ENCRYPTION_KEY="your-32-byte-encryption-key-base64"

# Session Secret (generate with: openssl rand -hex 32)
SESSION_SECRET="your-session-secret-here"
NEXTAUTH_SECRET="your-nextauth-secret-here"

# Encryption Master Key (generate with: openssl rand -base64 32)
ENCRYPTION_MASTER_KEY="your-encryption-master-key"

# Rate Limiting (Upstash Redis)
UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-token"

# Cloud Storage (Cloudflare R2 or AWS S3)
# For Cloudflare R2:
R2_ENDPOINT="https://your-account-id.r2.cloudflarestorage.com"
R2_BUCKET="your-bucket-name"
R2_ACCESS_KEY_ID="your-r2-access-key"
R2_SECRET_ACCESS_KEY="your-r2-secret-key"
# OR for AWS S3:
# S3_ENDPOINT="https://s3.amazonaws.com"
# S3_BUCKET="your-bucket-name"
# AWS_ACCESS_KEY_ID="your-aws-access-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret-key"

# Sentry Error Monitoring (REQUIRED for production)
# Sign up at https://sentry.io → Create project → Copy DSN
NEXT_PUBLIC_SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"
SENTRY_ORG="your-sentry-org"
SENTRY_PROJECT="your-sentry-project"
SENTRY_SUPPRESS_GLOBAL_ERROR_HANDLER_FILE_WARNING=1

# Optional: App Version for Sentry release tracking
NEXT_PUBLIC_APP_VERSION="1.0.0"

# ========================================
# SECURITY CONFIGURATION
# ========================================
# CORS: Comma-separated list of allowed origins (never use * in production)
# These origins are allowed to make cross-origin requests to your API
ALLOWED_ORIGINS="http://localhost:3000,https://holilabs.com,https://www.holilabs.com,https://app.holilabs.com"

# CSRF Protection: Requires SESSION_SECRET or NEXTAUTH_SECRET (configured above)
# CSRF tokens expire after 24 hours and use HMAC-SHA256 signatures

# Admin API Authentication (generate with: openssl rand -hex 32)
ADMIN_API_KEY="your-admin-api-key-here"

# Opt-Out Token Encryption (generate with: openssl rand -hex 32)
# Used for TCPA/CAN-SPAM compliant opt-out links
OPT_OUT_SECRET_KEY="your-opt-out-secret-key-here"

# Cron Jobs (generate with: openssl rand -hex 32)
CRON_SECRET="your-cron-secret-here"

# Meilisearch (Fast Patient Search Engine)
# Generate master key with: openssl rand -base64 32
MEILI_HOST="http://localhost:7700"
MEILI_MASTER_KEY="your-meilisearch-master-key-here"

# Logging (optional)
LOG_LEVEL="info"

# Analytics & A/B Testing (PostHog)
# Sign up at https://posthog.com → Create project → Copy keys
# HIPAA-compliant setup (auto-capture disabled, PHI sanitization enabled)
NEXT_PUBLIC_POSTHOG_KEY="phc_your-project-key-here"
NEXT_PUBLIC_POSTHOG_HOST="https://us.i.posthog.com"  # US-based for HIPAA compliance

# Medical License Verification APIs
# Brazil - CFM (Conselho Federal de Medicina)
# Option 1: Official CFM API (contact CFM for credentials)
CFM_API_KEY="your-cfm-api-key"
# Option 2: Infosimples (third-party service) - https://infosimples.com/consultas/cfm-cadastro/
INFOSIMPLES_API_TOKEN="your-infosimples-token"

# Brazil - CRM (Conselho Regional de Medicina) - State-level registries
CRM_API_KEY="your-crm-api-key"  # Optional: for state-specific verification

# Argentina - REFEPS/SISA (Red Federal de Registros de Profesionales de la Salud)
# Contact: soporte@sisa.msal.gov.ar for API access
SISA_USERNAME="your-sisa-username"
SISA_PASSWORD="your-sisa-password"

# USA - NPPES (National Provider Identifier Registry)
# No API key required - public API at https://npiregistry.cms.hhs.gov/api/

# ========================================
# MONITORING & ALERTING
# ========================================
# BetterStack (Logtail) - Structured Log Aggregation
# Sign up at https://betterstack.com → Create source → Copy source token
# When configured, all application logs are automatically sent to BetterStack
LOGTAIL_SOURCE_TOKEN="your-logtail-source-token"

# PagerDuty - Critical Alert Paging
# Sign up at https://pagerduty.com → Services → Integration → Copy integration key
# Used for P0/P1 critical alerts that require immediate response
PAGERDUTY_INTEGRATION_KEY="your-pagerduty-integration-key"

# Slack Webhook - Alert Notifications
# Slack App Directory → Incoming Webhooks → Add to channel → Copy webhook URL
# Used for all non-critical alerts (P1, P2, P3)
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
SLACK_ALERTS_CHANNEL="#prod-alerts"
SLACK_INCIDENTS_CHANNEL="#incidents"

# DataDog (Optional) - APM & Monitoring
# Sign up at https://datadoghq.com → Get API keys
DD_API_KEY="your-datadog-api-key"
DD_APP_KEY="your-datadog-app-key"
DD_SERVICE="holi-labs"
DD_ENV="production"

# Monitoring Configuration
MONITORING_ENABLED="true"
HEALTH_CHECK_INTERVAL="30000"  # Health check interval in ms (default: 30 seconds)
METRICS_RETENTION_DAYS="30"    # How long to keep metrics (default: 30 days)
